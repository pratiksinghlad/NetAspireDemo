# NetAspireDemo - .NET Aspire Weather Application

[![CI/CD Pipeline](https://github.com/pratiksinghlad/NetAspireDemo/actions/workflows/ci-cd.yml/badge.svg)](https://github.com/pratiksinghlad/NetAspireDemo/actions/workflows/ci-cd.yml)

A complete .NET Aspire demonstration showcasing Microsoft's opinionated, cloud-ready stack for building observable, production-ready, distributed applications with a weather API and web frontend.

## üåü What is .NET Aspire?

.NET Aspire is Microsoft's opinionated, cloud-ready stack that provides:

- **üîç Observability**: Built-in telemetry, logging, and health checks
- **üîß Orchestration**: Simplified service discovery and configuration management  
- **üí™ Resilience**: Automatic retry policies and circuit breakers
- **üìä Dashboard**: Rich development-time dashboard for monitoring your application
- **‚öôÔ∏è Service Defaults**: Pre-configured settings for common scenarios

## üÜï .NET 9 & Central Package Management

This project has been migrated to **.NET 9** with **Central Package Management** for improved maintainability:

- **üì¶ Directory.Packages.props**: Centralized package version management
- **üîß Directory.Build.props**: Global project settings and properties  
- **üéØ .NET 9 Target Framework**: Latest stable framework with performance improvements
- **üìã Simplified Project Files**: Cleaner `.csproj` files without version specifications

## üèóÔ∏è Project Architecture

```
üìÅ NetAspireDemo/
‚îú‚îÄ‚îÄ üì¶ Directory.Packages.props          # Central package version management
‚îú‚îÄ‚îÄ üîß Directory.Build.props             # Global MSBuild properties
‚îú‚îÄ‚îÄ üéØ src/NetAspireDemo.AppHost/        # Aspire orchestrator (START HERE)
‚îú‚îÄ‚îÄ ‚öôÔ∏è src/NetAspireDemo.ServiceDefaults/ # Shared Aspire configurations
‚îú‚îÄ‚îÄ üåê src/WeatherApi/                   # Weather API service
‚îú‚îÄ‚îÄ üñ•Ô∏è src/WeatherWeb/                   # Web frontend
‚îú‚îÄ‚îÄ üì¶ src/SharedModels/                 # Common data models
‚îî‚îÄ‚îÄ üß™ tests/WeatherApi.Tests/           # Unit tests
```

## üî¥ **Redis Caching Integration**

This project includes **Redis caching** powered by .NET Aspire for improved performance and scalability:

### **üöÄ Features**

- **‚ö° In-Memory Caching**: Weather data cached for faster response times
- **üîó Aspire Integration**: Redis container managed by .NET Aspire AppHost
- **üê≥ Docker Support**: Redis included in Docker Compose for production
- **üß™ Testcontainers**: Integration tests using Redis Testcontainers
- **üõ°Ô∏è SOLID Principles**: Clean architecture with proper dependency injection

### **‚öôÔ∏è How It Works**

1. **WeatherApi** requests are cached in Redis:
   - Forecast data: cached for 10 minutes
   - Current weather: cached for 5 minutes
   - Cache keys: `forecast:{city}` and `current:{city}`

2. **Cache Service** (`ICacheService`):
   - Generic interface for caching operations
   - Redis implementation using `IDistributedCache`
   - Automatic JSON serialization/deserialization
   - Error handling for corrupted cache data

3. **Aspire Orchestration**:
   - Redis container automatically started with AppHost
   - Connection string managed by Aspire service discovery
   - Health checks for Redis availability

### **üß™ Testing**

Comprehensive integration tests using **Testcontainers**:

```bash
# Run Redis integration tests
dotnet test tests/WeatherApi.Tests/ --filter "Redis"
```

**Test Coverage:**
- ‚úÖ Cache hit/miss scenarios
- ‚úÖ Data expiration behavior  
- ‚úÖ Concurrent access patterns
- ‚úÖ Error handling (corrupted data)
- ‚úÖ Cache key validation
- ‚úÖ Performance consistency

### **üîß Local Development**

**With Aspire (Recommended):**
```bash
dotnet run --project src/NetAspireDemo.AppHost
# Redis automatically started and configured
```

**With Docker Compose:**
```bash
docker compose up --build
# Includes Redis container with health checks
```

**Manual Redis Setup:**
```bash
# If running services individually
docker run -d -p 6379:6379 redis:7-alpine
dotnet run --project src/WeatherApi
```

## üê≥ **Redis Container Setup & Testing Guide**

### **üöÄ Running Redis for Development**

#### **Option 1: Automatic with .NET Aspire (Recommended)**
```bash
# Redis is automatically managed - just run the AppHost
dotnet run --project src/NetAspireDemo.AppHost
```
‚úÖ **Benefits:**
- Redis container automatically started and stopped
- Connection strings managed by Aspire
- Health checks and monitoring included
- View Redis status in Aspire Dashboard

#### **Option 2: Manual Redis Container**
```bash
# Start Redis container manually
docker run -d \
  --name redis-cache \
  -p 6379:6379 \
  redis:7-alpine

# Verify Redis is running
docker ps | grep redis

# Test Redis connection
docker exec -it redis-cache redis-cli ping
# Should return: PONG

# Start your services
dotnet run --project src/WeatherApi
dotnet run --project src/WeatherWeb
```

#### **Option 3: Docker Compose (Production-like)**
```bash
# Starts Redis + WeatherApi + WeatherWeb together
docker compose up --build

# View logs for specific service
docker compose logs redis
docker compose logs weatherapi

# Stop all services
docker compose down
```

### **üß™ Running Redis Integration Tests**

#### **Prerequisites for Integration Tests**
1. **Docker Desktop** must be running
2. **Testcontainers** will automatically manage Redis containers for tests

#### **Running Tests with Docker**

**Full Test Suite (Requires Docker):**
```bash
# Make sure Docker Desktop is running first
docker --version

# Run all tests including integration tests
dotnet test tests/WeatherApi.Tests/ --verbosity normal
```

**Unit Tests Only (No Docker Required):**
```bash
# Run only unit tests (skips Docker-dependent integration tests)
dotnet test tests/WeatherApi.Tests/ --filter "FullyQualifiedName!~Integration" --verbosity normal
```

**Redis Integration Tests Only:**
```bash
# Run only Redis-specific integration tests
dotnet test tests/WeatherApi.Tests/ --filter "FullyQualifiedName~Redis" --verbosity normal
```

#### **What Testcontainers Does**
- üê≥ **Automatic Container Management**: Starts fresh Redis container for each test class
- üîí **Isolation**: Each test gets a clean Redis instance  
- üßπ **Cleanup**: Automatically stops and removes containers after tests
- üöÄ **Fast**: Uses lightweight Redis Alpine image

#### **Test Categories**

| Test Type | Description | Docker Required |
|-----------|-------------|----------------|
| **Unit Tests** | WeatherService with in-memory cache | ‚ùå No |
| **Redis Cache Tests** | Redis operations with Testcontainers | ‚úÖ Yes |
| **Integration Tests** | End-to-end service testing with Redis | ‚úÖ Yes |

#### **Troubleshooting Test Issues**

**‚ùå "Docker is not running" Error:**
```bash
# Start Docker Desktop first
# Then run tests again
dotnet test tests/WeatherApi.Tests/
```

**‚ùå Port Conflicts:**
```bash
# Testcontainers uses random ports automatically
# No manual port management needed
```

**‚ùå Slow Test Performance:**
```bash
# First run downloads Redis image (one-time)
# Subsequent runs are much faster
docker pull redis:7-alpine  # Pre-download if needed
```

### **üîç Monitoring Redis in Development**

#### **With .NET Aspire Dashboard**
1. Run `dotnet run --project src/NetAspireDemo.AppHost`
2. Open Aspire Dashboard (auto-opens in browser)
3. Go to **Resources** tab ‚Üí See Redis container status
4. Go to **Metrics** tab ‚Üí Monitor cache hit/miss rates

#### **Manual Redis Monitoring**
```bash
# Connect to Redis CLI
docker exec -it redis-cache redis-cli

# Monitor Redis commands in real-time
MONITOR

# Check cache keys
KEYS *

# View specific cached data
GET "forecast:london"
GET "current:newyork"

# Check Redis info
INFO memory
INFO stats
```

#### **Redis Performance Monitoring**
```bash
# Check cache hit ratio
docker exec -it redis-cache redis-cli INFO stats | grep keyspace

# Monitor memory usage
docker exec -it redis-cache redis-cli INFO memory | grep used_memory_human

# View connected clients
docker exec -it redis-cache redis-cli CLIENT LIST
```

### **üöÄ Redis Container Best Practices**

#### **Development Environment**
```bash
# Use .NET Aspire for development (recommended)
dotnet run --project src/NetAspireDemo.AppHost

# Or start Redis with data persistence
docker run -d \
  --name redis-dev \
  -p 6379:6379 \
  -v redis-data:/data \
  redis:7-alpine redis-server --appendonly yes
```

#### **Production Environment**
```bash
# Use docker-compose.yml for production deployment
docker compose -f docker-compose.yml up -d

# Or use managed Redis service (Azure Cache for Redis, AWS ElastiCache)
```

#### **Testing Environment**
```bash
# Testcontainers handles everything automatically
dotnet test tests/WeatherApi.Tests/

# No manual Redis setup needed for tests!
```

### **üìã Quick Reference Summary**

| Scenario | Redis Setup | Command |
|----------|-------------|---------|
| **üéØ Development (Recommended)** | Automatic via Aspire | `dotnet run --project src/NetAspireDemo.AppHost` |
| **üîß Individual Services** | Manual Docker container | `docker run -d -p 6379:6379 redis:7-alpine` |
| **üê≥ Production-like** | Docker Compose | `docker compose up --build` |
| **üß™ Testing** | Automatic via Testcontainers | `dotnet test` |

**Key Benefits:**
- ‚úÖ **Aspire**: Zero-config Redis with monitoring
- ‚úÖ **Testcontainers**: Isolated test environments
- ‚úÖ **Docker Compose**: Production-ready setup
- ‚úÖ **Manual Setup**: Full control for development

## üöÄ Quick Start

### Prerequisites

- [.NET 9 SDK](https://dotnet.microsoft.com/download) (**Required**)
- [Docker Desktop](https://www.docker.com/get-started) (optional, for containers)

### üéØ **Option 1: Run with .NET Aspire (RECOMMENDED)**

> **‚ö†Ô∏è Note for .NET 10 Preview Users**: If you encounter DCP/Dashboard path errors, this is a known issue with .NET 10 preview versions. Use Option 2 or 3 below while Microsoft stabilizes the Aspire tooling for preview SDKs.

**For .NET 9 SDK Users:**

1. **Clone and build**
   ```bash
   git clone https://github.com/pratiksinghlad/NetAspireDemo.git
   cd NetAspireDemo
   dotnet build
   ```

2. **Start Aspire AppHost** (this starts everything!)
   ```bash
   dotnet run --project src/NetAspireDemo.AppHost
   ```

3. **üéâ Access the applications:**
   - **üìä Aspire Dashboard**: `https://localhost:15001` (monitoring & insights)
   - **üåê Weather API**: `http://localhost:5001` (auto-detected port)
   - **üñ•Ô∏è Weather Web**: `http://localhost:5000` (auto-detected port)
   - **üî¥ Redis Cache**: Automatically managed by Aspire

**For .NET 10 Preview Users:**
```bash
# Use Option 2 below until Aspire tooling is updated for .NET 10 preview
```

### üîß **Option 2: Traditional Development (Individual Services)**

**‚ö†Ô∏è Important:** Option 2 requires manual Redis setup since the services expect Redis to be available.

1. **Start Redis Container** (Terminal 1)
   ```bash
   docker run -d --name redis-dev -p 6379:6379 redis:7-alpine
   ```

2. **Start the API** (Terminal 2)
   ```bash
   dotnet run --project src/WeatherApi
   ```

3. **Start the Web App** (Terminal 3)
   ```bash
   dotnet run --project src/WeatherWeb
   ```

4. **Access the applications:**
   - **üåê Weather API**: `https://localhost:7001` or `http://localhost:5001`
   - **üñ•Ô∏è Weather Web**: `https://localhost:7000` or `http://localhost:5000`
   - **üî¥ Redis**: `localhost:6379`

5. **Stop services when done:**
   ```bash
   # Stop and remove Redis container
   docker stop redis-dev && docker rm redis-dev
   ```

### üê≥ **Option 3: Docker Compose (Production-like)**

```bash
# Starts Redis + WeatherApi + WeatherWeb together
docker compose up --build
```

**Access:**
- **üñ•Ô∏è Weather Web**: `http://localhost:5000`
- **üåê Weather API**: `http://localhost:5001`
- **üî¥ Redis**: `localhost:6379`

## üìä **The .NET Aspire Dashboard - Your Command Center**

When you run the AppHost, the Aspire Dashboard automatically opens and provides:

### üéØ **Dashboard Features**

| Tab | What You See | Why It's Useful |
|-----|-------------|----------------|
| **üè† Resources** | All running services, their status, and endpoints | Quick overview of your entire application |
| **üìä Metrics** | Real-time performance metrics, request rates, response times | Monitor application performance |
| **üîç Traces** | Distributed traces showing request flow across services | Debug issues and understand request paths |
| **üìù Logs** | Centralized logs from all services with correlation | Unified debugging and monitoring |
| **‚öôÔ∏è Config** | Environment variables and configuration values | Verify service configuration |

### üöÄ **What the Dashboard Adds**

1. **üîç Real-time Observability**
   - See all services and their health status instantly
   - Monitor CPU, memory, and request metrics live
   - View distributed traces across your microservices

2. **üêõ Enhanced Debugging**
   - Correlate logs across all services
   - Trace requests from frontend to API
   - Identify performance bottlenecks quickly

3. **‚ö° Development Velocity**
   - No need to set up separate monitoring tools
   - Instant feedback on code changes
   - Quick access to all service endpoints

4. **üîß Configuration Management**
   - View all environment variables in one place
   - Validate service configuration
   - Easy service discovery setup

## ü§î **Why Do We Need .NET Aspire?**

### **Without Aspire** üò§
```bash
# Start API manually
cd src/WeatherApi && dotnet run &

# Start Web manually in another terminal
cd src/WeatherWeb && dotnet run &

# Check logs in multiple places
# Set up monitoring tools separately
# Configure service discovery manually
# Handle health checks individually
```

### **With Aspire** üòç
```bash
# Start everything with one command
dotnet run --project src/NetAspireDemo.AppHost

# Everything is automatically:
# ‚úÖ Started and orchestrated
# ‚úÖ Monitored and observed
# ‚úÖ Health-checked
# ‚úÖ Connected with service discovery
# ‚úÖ Logged and traced
```

### **Key Benefits:**

üéØ **Simplified Development**
- Single command to start your entire distributed application
- Automatic service discovery and configuration
- Built-in health checks and monitoring

üìä **Built-in Observability**
- No need to set up Prometheus, Grafana, or other monitoring tools
- Automatic telemetry collection and visualization
- Distributed tracing out of the box

üîß **Production Readiness**
- Industry-standard OpenTelemetry integration
- Resilience patterns (retry, circuit breaker)
- Configuration and secrets management

‚ö° **Developer Experience**
- Rich dashboard for real-time insights
- Hot reload and fast iteration
- Integrated debugging and diagnostics

## üß™ **Testing the Application**

### **Running Tests**

#### **üìã All Tests (Requires Docker Desktop)**
```bash
# Make sure Docker Desktop is running
docker --version

# Run complete test suite including Redis integration tests
dotnet test --verbosity normal
```

#### **‚ö° Unit Tests Only (No Docker Required)**
```bash
# Fast tests that don't require containers
dotnet test --filter "FullyQualifiedName!~Integration" --verbosity normal
```

#### **üî¥ Redis Integration Tests Only**
```bash
# Tests that specifically test Redis caching with Testcontainers
dotnet test --filter "FullyQualifiedName~Redis" --verbosity normal
```

### **Test Categories Explained**

| Test Type | What It Tests | Docker Required | Speed |
|-----------|---------------|----------------|-------|
| **Unit Tests** | Business logic with mocked dependencies | ‚ùå No | ‚ö° Fast |
| **Redis Cache Tests** | Redis operations with real containers | ‚úÖ Yes | üêå Slower |
| **Service Integration Tests** | End-to-end with Redis caching | ‚úÖ Yes | üêå Slower |

### **Test Scenarios Covered**

‚úÖ **Caching Behavior**
- Cache hit/miss scenarios
- Data expiration (5min current, 10min forecast)
- Cache key generation and validation

‚úÖ **Error Handling**
- Invalid city names and empty inputs
- Corrupted cache data handling
- Redis connection failures

‚úÖ **Performance**
- Concurrent request handling
- Cache consistency across multiple calls
- Memory usage and cleanup

### **Troubleshooting Tests**

**‚ùå "Docker is not running" Error:**
```bash
# Solution: Start Docker Desktop first
# Then run tests again
dotnet test
```

**‚ùå Tests are slow on first run:**
```bash
# Normal: First run downloads Redis container image
# Subsequent runs are much faster
# Pre-download Redis image:
docker pull redis:7-alpine
```

**‚ùå Port conflicts:**
```bash
# Testcontainers automatically handles ports
# No manual configuration needed
# Each test gets isolated Redis instance
```

## üì± **Using the Application**

1. **Start with Aspire**: `dotnet run --project src/NetAspireDemo.AppHost`
2. **Open Dashboard**: Browser automatically opens to `https://localhost:15001`
3. **Use the App**: Navigate to Weather Web at `http://localhost:5000`
4. **Monitor**: Watch real-time metrics and traces in the dashboard

### **Try These Features:**
- Enter different city names (New York, London, Tokyo, Sydney)
- Watch the request traces flow from Web ‚Üí API
- Monitor response times and success rates
- View structured logs with correlation IDs

## üõ†Ô∏è **Troubleshooting**

### **Common Issue: Aspire DCP/Dashboard Path Error**

**Error Message:**
```
Property CliPath: The path to the DCP executable used for Aspire orchestration is required.
Property DashboardPath: The path to the Aspire Dashboard binaries is missing.
```

**Solution Options:**

1. **Use Stable .NET 9 SDK** (Recommended)
   ```bash
   # Download and install .NET 8 SDK from https://dotnet.microsoft.com/download/dotnet/9.0
   dotnet --version  # Should show 8.x.x
   dotnet run --project src/NetAspireDemo.AppHost
   ```

2. **Use Individual Services** (Alternative)
   ```bash
   # Terminal 1: Start API
   dotnet run --project src/WeatherApi
   
   # Terminal 2: Start Web (in new terminal)
   dotnet run --project src/WeatherWeb
   ```

3. **Use Docker Compose** (Production-like)
   ```bash
   docker compose up --build
   ```

### **Other Common Issues**

**Build Errors:**
```bash
# Clean and restore
dotnet clean
dotnet restore
dotnet build
```

**Connection Refused:**
- Ensure API is running before starting Web app
- Check `WeatherApiBaseUrl` configuration
- Verify ports 5000 and 5001 are available

**Docker Issues:**
- Ensure Docker Desktop is running
- Check you're running from repository root
- Verify Docker daemon is accessible

### **Enhanced Project Structure**

```
NetAspireDemo/
‚îú‚îÄ‚îÄ üéØ src/NetAspireDemo.AppHost/          # üåü Aspire Orchestrator
‚îÇ   ‚îú‚îÄ‚îÄ Program.cs                         # Service definitions and dependencies
‚îÇ   ‚îî‚îÄ‚îÄ Properties/launchSettings.json     # Launch profiles for dashboard
‚îú‚îÄ‚îÄ ‚öôÔ∏è src/NetAspireDemo.ServiceDefaults/   # üåü Aspire Service Defaults
‚îÇ   ‚îú‚îÄ‚îÄ Extensions.cs                      # OpenTelemetry, health checks, resilience
‚îÇ   ‚îî‚îÄ‚îÄ NetAspireDemo.ServiceDefaults.csproj
‚îú‚îÄ‚îÄ üåê src/WeatherApi/                     # Weather API Service
‚îÇ   ‚îú‚îÄ‚îÄ Services/IWeatherService.cs        # Business logic interface
‚îÇ   ‚îú‚îÄ‚îÄ Services/WeatherService.cs         # Weather data implementation
‚îÇ   ‚îú‚îÄ‚îÄ Program.cs                         # üåü Enhanced with Aspire
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                         # Container definition
‚îú‚îÄ‚îÄ üñ•Ô∏è src/WeatherWeb/                     # Web Frontend
‚îÇ   ‚îú‚îÄ‚îÄ Pages/Index.cshtml                 # Weather dashboard UI
‚îÇ   ‚îú‚îÄ‚îÄ Services/IWeatherApiClient.cs      # API client interface
‚îÇ   ‚îú‚îÄ‚îÄ Services/WeatherApiClient.cs       # üåü Enhanced with resilience
‚îÇ   ‚îú‚îÄ‚îÄ Program.cs                         # üåü Enhanced with Aspire
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                         # Container definition
‚îú‚îÄ‚îÄ üì¶ src/SharedModels/                   # Common Models
‚îî‚îÄ‚îÄ üß™ tests/WeatherApi.Tests/             # Unit Tests
```

### **üåü Aspire-Enhanced API Endpoints**

| Endpoint | Description | Aspire Enhancement |
|----------|-------------|-------------------|
| `GET /api/weather/forecast?city={city}` | 5-day forecast | ‚úÖ Traced & Monitored |
| `GET /api/weather/{city}` | Current weather | ‚úÖ Traced & Monitored |
| `GET /health` | Health check | ‚úÖ Enhanced health reporting |
| `GET /alive` | Liveness probe | ‚úÖ Aspire-specific endpoint |
| `GET /swagger` | API documentation | ‚úÖ Available in dashboard |

### **üîß Configuration & Environment Variables**

| Variable | Description | Default | Aspire Feature |
|----------|-------------|---------|----------------|
| `WeatherApiBaseUrl` | API endpoint for web app | Auto-discovered | ‚úÖ Service Discovery |
| `OTEL_EXPORTER_OTLP_ENDPOINT` | OpenTelemetry endpoint | Not set | ‚úÖ Telemetry Export |
| `ASPNETCORE_ENVIRONMENT` | Environment setting | Development | ‚úÖ Environment-aware |

## üß™ **Testing & Quality**

### **Run Tests**

```bash
# Run all tests
dotnet test

# Run with coverage
dotnet test --collect:"XPlat Code Coverage"

# Run specific test project
dotnet test tests/WeatherApi.Tests/
```

### **Test Coverage Includes:**

- ‚úÖ Weather service unit tests
- ‚úÖ Data validation tests  
- ‚úÖ Temperature conversion tests
- ‚úÖ HTTP client resilience tests
- ‚úÖ Health check validations
- ‚úÖ Edge case handling

### **Aspire Testing Benefits:**

- üîç **Distributed Tracing in Tests**: See how test requests flow through services
- üìä **Test Metrics**: Monitor test performance and reliability
- üè• **Health Check Testing**: Validate service health during test runs

## üê≥ **Docker & Containerization**

### Build Individual Images

Build the API image:
```bash
docker build -f src/WeatherApi/Dockerfile -t weatherapi .
```

Build the Web image:
```bash
docker build -f src/WeatherWeb/Dockerfile -t weatherweb .
```

### Run Individual Containers

Run API container:
```bash
docker run -p 5001:8080 --name weatherapi weatherapi
```

Run Web container (after API is running):
```bash
docker run -p 5000:8080 --name weatherweb -e WEATHER_API_BASE_URL=http://weatherapi:8080 --link weatherapi weatherweb
```

## ‚òÅÔ∏è Deployment to Azure

### Option 1: Azure Web App with Docker Compose (Recommended)

1. **Create Azure Web App for Containers**
   ```bash
   az webapp create \
     --resource-group myResourceGroup \
     --plan myAppServicePlan \
     --name myWeatherApp \
     --multicontainer-config-type compose \
     --multicontainer-config-file docker-compose.yml
   ```

2. **Configure Environment Variables**
   ```bash
   az webapp config appsettings set \
     --resource-group myResourceGroup \
     --name myWeatherApp \
     --settings WEATHER_API_BASE_URL=http://weatherapi:8080
   ```

### Option 2: GitHub Actions Automated Deployment

1. **Set up GitHub Secrets**
   - `AZURE_WEBAPP_PUBLISH_PROFILE`: Download from Azure portal
   - Or configure `AZURE_CREDENTIALS` for service principal authentication

2. **Enable Deployment**
   - Uncomment the `deploy-to-azure` job in `.github/workflows/ci-cd.yml`
   - Update the app name and other Azure-specific settings

3. **Deploy**
   - Push to `main` branch triggers automatic deployment

### Option 3: Azure Container Registry + Web App

1. **Push images to Azure Container Registry**
   ```bash
   az acr build --registry myregistry --image weatherapi ./src/WeatherApi
   az acr build --registry myregistry --image weatherweb ./src/WeatherWeb
   ```

2. **Update Web App to use ACR images**
   ```bash
   az webapp config container set \
     --name myWeatherApp \
     --resource-group myResourceGroup \
     --docker-custom-image-name myregistry.azurecr.io/weatherweb:latest
   ```

## üîß Configuration

### Required Azure Resources

For production deployment, you'll need:

1. **Resource Group**
2. **App Service Plan** (Linux, supports containers)
3. **Azure Web App** (configured for multi-container)
4. **Azure Container Registry** (optional, for private images)

### Environment Variables for Azure

Set these in your Azure Web App configuration:

```bash
WEATHER_API_BASE_URL=http://weatherapi:8080
ASPNETCORE_ENVIRONMENT=Production
WEBSITES_ENABLE_APP_SERVICE_STORAGE=false
WEBSITES_PORT=8080
```

## üìà Monitoring and Health Checks

Both services expose health check endpoints:

- API Health: http://localhost:5001/health
- Web Health: http://localhost:5000/health

In Azure, configure health check paths in the Web App settings.

## üîí Security Considerations

- All containers run as non-root users
- CORS is configured for development (restrict in production)
- Health checks don't expose sensitive information
- No hardcoded secrets in configuration files

## üõ†Ô∏è Troubleshooting

### Common Issues

1. **"Connection refused" errors**
   - Ensure API is running before starting Web app
   - Check `WEATHER_API_BASE_URL` configuration

2. **Docker build fails**
   - Ensure you're running from the repository root
   - Check Docker daemon is running

3. **Tests fail**
   - Run `dotnet restore` to ensure packages are restored
   - Check .NET 8 SDK is installed

### Frequently Used Commands

```bash
# Clean and rebuild everything
dotnet clean && dotnet build

# Run with specific environment
ASPNETCORE_ENVIRONMENT=Production dotnet run --project src/WeatherWeb

# View Docker logs
docker compose logs weatherapi
docker compose logs weatherweb

## üöÄ **Getting Started in 30 Seconds**

```bash
# Clone and start with Aspire
git clone https://github.com/pratiksinghlad/NetAspireDemo.git
cd NetAspireDemo
dotnet run --project src/NetAspireDemo.AppHost

# üéâ That's it! Everything starts automatically:
# ‚úÖ Weather API + Web App running  
# ‚úÖ Aspire Dashboard monitoring
# ‚úÖ Service discovery configured
# ‚úÖ Health checks active
# ‚úÖ Distributed tracing enabled
```

## üéØ **What Makes This Special**

This isn't just another weather app - it's a showcase of **modern .NET development** with:

- **üåü .NET Aspire Integration**: Experience the future of .NET distributed applications
- **üìä Built-in Observability**: See your app's behavior in real-time
- **üîß Service Discovery**: Services find each other automatically  
- **üè• Health Monitoring**: Know your app's health at a glance
- **‚ö° Developer Experience**: Single command to start everything
- **üê≥ Container Ready**: Docker support for production deployment

## ü§ù **Contributing**

We welcome contributions! Here's how:

1. **üç¥ Fork** the repository
2. **üåü Create** a feature branch: `git checkout -b feature/amazing-feature`
3. **‚úçÔ∏è Make** your changes and add tests
4. **‚úÖ Ensure** tests pass: `dotnet test`
5. **üìù Commit** your changes: `git commit -m 'Add amazing feature'`
6. **üöÄ Push** to the branch: `git push origin feature/amazing-feature`
7. **üì¨ Open** a Pull Request

### **Areas for Contribution:**
- üåê Additional weather data sources
- üé® UI/UX improvements
- üß™ More comprehensive testing
- üìä Additional monitoring capabilities
- üîí Security enhancements
- üì± Mobile responsiveness

## üìÑ **License**

This project is licensed under the MIT License - see the LICENSE file for details.

## üéì **Additional Resources**

### **Microsoft Documentation**
- üìñ [.NET Aspire Official Docs](https://learn.microsoft.com/en-us/dotnet/aspire/)
- üèóÔ∏è [ASP.NET Core Documentation](https://docs.microsoft.com/aspnet/core)
- ‚òÅÔ∏è [Azure Container Apps](https://docs.microsoft.com/azure/container-apps/)

### **Learning & Tutorials**
- üé¨ [.NET Aspire Video Series](https://www.youtube.com/playlist?list=PLdo4fOcmZ0oULyHSPBx-tQzePOYlhvrAU)
- üõ†Ô∏è [Aspire Samples Repository](https://github.com/dotnet/aspire-samples)
- üìä [OpenTelemetry .NET](https://github.com/open-telemetry/opentelemetry-dotnet)

### **Development Tools**
- üê≥ [Docker Documentation](https://docs.docker.com/)
- üöÄ [GitHub Actions](https://docs.github.com/actions)
- üîß [Azure Developer CLI](https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/)

---

**‚≠ê Star this repository if you found it helpful!**

*Built with ‚ù§Ô∏è using .NET Aspire, ASP.NET Core, and modern development practices.*
